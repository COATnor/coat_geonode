<link rel="stylesheet" href="http://openlayers.org/en/v3.17.1/css/ol.css" type="text/css">
<script src="http://openlayers.org/en/v3.17.1/build/ol.js" type="text/javascript"></script>
<script type="text/javascript">

document.addEventListener("DOMContentLoaded", function(event) {

  	document.getElementById('preview_map').setAttribute("style", "height:500px");

  	source = null;

  	var crs = 'EPSG:3857';

    var coordinates = [24, 70.6]
  	var lonlat = ol.proj.transform(coordinates, 'EPSG:4326', 'EPSG:3857')
    lon = lonlat[0]
    lat = lonlat[1]



  	var layers = [
        	new ol.layer.Tile({
            	source: new ol.source.OSM()
          	}),
            waypoints_layer = new ol.layer.Vector({
                source: new ol.source.Vector({
                    url: "{% url 'mothgeojson' %}",
                    format: new ol.format.GeoJSON({
                        defaultDataProjection:  'EPSG:4326',
                        projection: 'EPSG:3857'
                    }),
                    name: 'waypoints_layer'
                }),
            }),

    ];

    map = new ol.Map({
                layers: layers,
                target: 'preview_map',
                view: new ol.View({
                    zoom: 5,
                    projection: crs,
                    center: [lon, lat]
                })
    });





});
</script>